<xi_story file_format="xi_story-0.0.1"
          name="quinn_goes_hiking"
          revision="1"
          designed_for_video_mode="800x600@32">

  <!-- TODO: Consider using MzScheme or Guile Scheme instead of XML.
       Scheme can be generated by a WYSIWYG editor and has the added benefit
       of being a programming language rather than just a data file. -->

  <title>Quinn Goes Hiking</title>

  <scenes>
    <scene name="scene001" keep_previous_scene="true" preload_next_scene="false" delete_other_scenes="true" sequence="scene001_seq" />
  </scenes>

  <sequences>
    <sequence name="scene_ftb_transition">
      <call func="fade_to_black"   job="fade_out" duration="3.5" />
      <call func="audio_crossfade" job="music_crossfade" from_job="music_playing" to_audio="song2.ogg" duration="3.5" name="xfade" />
      <call func="wait_for"        job="fade_out" />
    </sequence>
    <sequence name="quinn_and_dog_find_stick">
      <call func="place_object" name="backdrop" composite="scene1_backdrop"  position="@center"                layer="backdrop" />
      <call func="place_object" name="quinn"    composite="quinn_walking_lr" position="@bot_left"              layer="central" />
      <call func="place_object" name="dog"      composite="dog_walking_lr"   position="quinn@bot_left:-10,0,0" layer="central" />
      <call func="place_object" name="stick"    composite="stick"            position="@bot_left:50,40,0"      layer="central" />

      <call func="move_object"  job="quinn_entering" object="quinn" x="0.0" y="0.0" z="0.0" duration="5.0" layer="central">
        <movement name="enter_from_left" type="path" />
        <movement name="zigzag"          type="path_decorator" />
      </call>
      <call func="move_object"  job="dog_entering"   object="quinn" x="0.0" y="0.0" z="0.0" duration="5.0" layer="central">
        <movement name="enter_from_left" type="path" />
        <movement name="zigzag"          type="path_decorator" />
      </call>

      <call func="fade_from_black" job="fade_in" />
      <call func="wait_for"        job="fade_in" />
      <call func="wait_for"        job="quinn_entering" />
      <call func="stall" duration="3.0" />

      <call func="show_text" name="text" x="50.0" y="70.0" z="0.0" layer="dialog">
        We found a stick!
      </call>
      <call func="wait_for" job="text" />

      <call func="update_object" name="quinn" composite="quinn_picking_up_item" />
    </sequence>
    <sequence name="scene001_seq">
      <sequence name="@scene_ftb_transition">
        <call name="@xfade" to_audio="song1.ogg" />
      </sequence>
      <sequence name="@quinn_and_dog_find_stick" />
      <call func="show_ui" name="nav_ui" composite="page_turn_ui" />
    </sequence>
  </sequences>

  <composites load_from="design/composites">
    <composite name="start_button" type="button">
      <image name="but"   role="default"  position="@center:0,0,0"       file="start_button.bmp" />
      <image name="but_f" role="focus"    position="but@top_left:0,0,0"  file="start_button_focus.bmp" />
      <image name="but_a" role="action"   position="but@top_left:1,1,0"  file="start_button_action.bmp" />
    </composite>
    <composite name="scene1_backdrop">
      <image name="sky"       position="@top_left:0,0,0"           alteration="0"  file="sky.bmp" />
      <image name="mountain1" position="@bot_left:0,0,0"           alteration="10" file="mountain.bmp" />
      <image name="mountain2" position="mountain1@top_left:20,0,0" alteration="20" file="mountain.bmp" />
    </composite>
  </composites>
</xi_story>
